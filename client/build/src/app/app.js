angular.module("dashKo",["ngResource","lbServices","ui.router"]).config(["LoopBackResourceProvider","$stateProvider","$urlRouterProvider",function(o,e,t){o.setUrlBase("http://dashko.herokuapp.com/api"),t.otherwise("/"),e.state("home",{url:"/",template:"<div>HOME</div>",controller:"AppCtrl"})}]).factory("lbAPI",["Log","Group",function(o,e){var t=function(){return o.find().$promise},r=function(){return e.find().$promise},n=function(o){return e.logs({},{id:o.groupId}).$promise},u=function(o){return e.create({name:o.name,description:o.description,unit:o.unit})},i=function(o){return e.logs.create({id:o.id},{date:new Date,unit:o.unit,value:o.value}).$promise};return{getGroups:r,getLogs:t,getGroupLog:n,createGroup:u,createGroupLog:i}}]).controller("AppCtrl",["$scope","lbAPI","Group",function(o,e,t){o.CreateGroup=function(){t.create({name:o.groupName,description:o.groupDescription,unit:o.groupUnit}).$promise.then(function(e){console.log("made new group",e),o.getGroups()})},o.getGroups=function(){e.getGroups().then(function(e){console.log("Get groups",e),o.groups=e})},o.editGroup=function(e,r,n,u){t.prototype$updateAttributes({id:e,name:r,description:n,unit:u}).$promise.then(function(e){console.log("edited group",e),o.getGroups()})},o.deleteGroup=function(e){t.deleteById({id:e}).$promise.then(function(e){console.log("deleted group",e),o.getGroups()})},o.createGroupLog=function(o,t){e.createGroupLog({id:o.id,unit:o.unit,value:t}).then(function(o){console.log("created log for group",o)})},o.getGroupLogs=function(o){e.getGroupLog({groupId:o}).then(function(o){console.log("got log for group",o),r(o)})},o.getGroups();var r=function(o){var e=o.map(function(o){return[o.date,o.value]});console.log("data to draw",e),$("#container").highcharts({xAxis:{type:"datetime"},series:[{data:e}]})}}]).controller("ChartCtrl",["$scope",function(o){}]);